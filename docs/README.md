# <div align="center">Организационно–технологическое архитектурное решение (ОТАР) по задаче «Развитие CRM системы»</div>

## Оглавление
- [История изменений](#история-изменений)
- [Термины и сокращения](#термины-и-сокращения)
- [Цель проекта/задачи](#цель-проектазадачи)
- [Бизнес-архитектура решения](#бизнес-архитектура-решения)
  * [Функциональная модель процессов](#функциональная-модель-процессов)
- [Информационная архитектура решения](#информационная-архитектура-решения)
  * [Потоки данных](#потоки-данных-data-flow-diagram)
  * [Бизнес-данные](#бизнес-данные)
- [Архитектура приложения](#архитектура-приложения)
  * [Концептуальная модель и интеграция](#концептуальная-модель-и-интеграция)
  * [Перечень компонентов](#перечень-компонентов)
  * [Выбор СУБД](#выбор-субд)
  * [Архитектура БД](#архитектура-бд)
  * [Модель компонентов приложений](#модель-компонентов-приложений)
  * [Модель развертывания приложений](#модель-развертывания-приложений)
  * [Open Api](#open-api)
- [Требования и решения по безопасности](#требования-и-решения-по-безопасности)

### История изменений

| *Номер версии*|    *Дата*   | *Автор изменения* |       *Суть изменения*        |
|:------------:|:------------:|:---------------:|:-------------------------------:|
| 1.0          | 01.12.2022   |                 | Первоначальная версия документа |

### Термины и сокращения
(Доменная модель)
| Термин\Сокращение | Значение         | Автор изменения |          Суть изменения         |
|-------------------|------------------|:---------------:|:-------------------------------:|
| Компания          | ПАО «Ростелеком» |                 | Первоначальная версия документа |
|                   |                  |                 |                                 |
|                   |                  |                 |                                 |

### Цель проекта/задачи

### Бизнес-архитектура решения
| Код | Название бизнес-процесса | Система автоматизации процесса | Интенсивность операций на дату внедрения (м/ч/д) | Интенсивность операций на конец года (м/ч/д) | Интенсивность операций на конец следующего года (м/ч/д) |
|:---:|:------------------------:|:------------------------------:|:------------------------------------------------:|:--------------------------------------------:|:-------------------------------------------------------:|
| БП1 |                          |               CRM              |                    1 / 5 / 15                    |                  1 / 5 / 60                  |                      2 / 935 / 160                      |
|     |                          |                                |                                                  |                                              |                                                         |
|     |                          |                                |                                                  |                                              |                                                         |

#### Функциональная модель процессов

<details><summary>Use-case diagrams</summary>

![Диаграмма вариантов использования - общая](../Use-case/Use_Overview.png)
![Диаграмма вариантов использования - работа с клиентом](../Use-case/Use_Client.png)
![Диаграмма вариантов использования - дашборд](../Use-case/Use_Dashboard.png)
![Диаграмма вариантов использования - работа с обращениями](../Use-case/Use_Request.png)
![Диаграмма вариантов использования - работа с задачами](../Use-case/Use_Task.png)

</details>

<details><summary>Sequence diagrams</summary>

![Диаграмма последовательности - общая](../Sequence/S_Overview.png)
![Диаграмма последовательности - работа с клиентом](../Sequence/S_Client.png)
![Диаграмма последовательности - аутентификация и авторизация](../Sequence/S_Auth.png)
![Диаграмма последовательности - работа с обращениями](../Sequence/S_Request.png)
![Диаграмма последовательности - работа с задачами](../Sequence/S_Task.png)

</details>

<details><summary>BPMN diagram</summary>

![Бизнес процесс работы с заявкой](../BPMN/BPMN_Task.png)

</details>

### Информационная архитектура решения

#### Потоки данных (data flow diagram)
<details>
  <summary>Уровень 0</summary>
  <img src="https://github.com/mrr000/gb-coursework/blob/3fa3828089952c9b50eab3b1765ad0131bea2621/DFD/DFD-level0.png" height=100% width=100%><br /> 
</details>
<details>
  <summary>Уровень 1</summary>
  <img src="https://github.com/mrr000/gb-coursework/blob/3fa3828089952c9b50eab3b1765ad0131bea2621/DFD/DFD-level1.png" height=100% width=100%><br /> 
</details>

#### Бизнес-данные
Можно заполнить по основным сущностям (+ приложить ER)
| № | Название объекта данных | Где хранится (системы) | Статус изменения   объекта данных | Объем данных | Глубина хранения |
|:---:|:---:|:---:|:---:|:---:|:---:|
|   | Событие по клиенту | DWH, CRM | Разработка | 200 ГБ | 5 лет |
|  |  |  |  |  |  |
|  |  |  |  |  |  |

### Архитектура приложения

#### Концептуальная модель и интеграция
<details>
  <summary>Показать</summary>
  <img src="https://github.com/mrr000/gb-coursework/blob/17964f2df2398e33a1259572e981f272d098c6c3/C4-diagram/container%20diagram.png" height=100% width=100%><br />
</details>

#### Перечень компонентов
| № | Название системы/модуля/компонента | Тип объекта | Платформа | Назначение | Зона размещения компонента | Статус изменения   компонента |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|   | Client-service | Сервис | RHEL/Docker/Go | Решение для управления клиентами | LAN | Разработка |
|  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |

#### Модель компонентов приложений
(сюда компоненты, классы и т.д.)

#### Выбор СУБД

Для проектируемого решения предлагается использовать следующие СУБД:
-	Postgres Pro Enterprise – для хранения и обработки транзакционных данных.
-	Виртуальное хранилище Ростелеком – для хранения файлов.

Выбор виртуального хранилища Ростелеком обусловлен использованием уже существующей инфраструктуру заказчика и поддержкой распространенного протокола Amazon S3 API.
СУБД Postgres Pro была выбрана в результате оценки критериев сравнения между наиболее распространенными реляционными СУБД (данный тип обеспечивает наиболее эффективную обработку транзакционных данных).

С учетом специфики заказчика, наиболее целесообразным является выбор СУБД Postgres, обладающей следующими преимуществами:
-	отсутствие санкционных рисков использования;
-	наличие вендоров осуществляющих поддержку и развитие на территории РФ;
-	наличие open source версии для исключения vendor lock.

Далее среди отечественных решений на основе СУБД Postgres был выбран продукт, имеющий реализацию высокодоступного (high availability) кластера «из коробки»: СУБД Postgres Pro Enterprise. Основным преимуществом реализации кластера СУБД Postgres Pro Enterprise является:
-	наличие конфигурации multimaster, позволяющей в отличии от других продуктов выполнять масштабирование операций не только на чтение, но и на запись;
-	использование разработанного расширения Postgres (без использования стороннего программного обеспечения) для создания и управления кластером.

<details>
 <summary>Показать критерии</summary>
 <img src="https://github.com/mrr000/gb-coursework/blob/5f14a92e4b8fe7d48af462948601cca7eb8a6f59/DBMS%20comparison/DBMS-comparison1.png" height=100% width=100%><br /> 
 <img src="https://github.com/mrr000/gb-coursework/blob/5f14a92e4b8fe7d48af462948601cca7eb8a6f59/DBMS%20comparison/DBMS-comparison2.png" height=100% width=100%><br /> 
</details>


#### Архитектура БД

<details><summary>Масштабирование</summary>

![Репликация](../DB-architecture/DB-architecture.png)

</details>

<details><summary>Катастрофоустойчивость</summary>

![Катастрофоустойчивость](../DB-architecture/DB_DisasterRecovery.jpg)

</details>


#### Модель развертывания приложений

<details><summary>Диаграмма развертывания</summary>

![Диаграмма развёртывания](../Deployment/deployment.png)

</details>

#### Open Api

<details><summary>Open API</summary>

![Open API](../swagger/api.yaml)

</details>

### Требования и решения по безопасности
